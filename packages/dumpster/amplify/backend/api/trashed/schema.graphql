input S3ObjectInput {
  bucket: String!
  key: String!
  region: String!
  localUri: String
  mimeType: String
}

type Location @aws_iam {
  lat: Float!
  lon: Float!
}

input LocationInput {
  lat: Float!
  lon: Float!
}

enum VideoMimeType {
  WEBM
  MP4
}

type S3Object {
  bucket: String!
  key: String!
  region: String!
}

enum MediaConvertJobState {
  SUBMITTED
  PROGRESSING
  COMPLETE
}

type MediaConvertJob @model {
  id: ID!
  state: MediaConvertJobState!
  video: Video! @connection
}

type VideoS3Object {
  file: S3Object!
  mimeType: VideoMimeType!
  cloudfrontUrl: String
}

type Video 
  @model 
  @auth(rules: [{allow: public, provider: iam, operations: [create, read]}])
  {
  id: ID!
  files: [VideoS3Object!]!
  thumbnail: S3Object
  mediaConvertJob: MediaConvertJob @connection
}

type Item
  @model
  @auth(rules: [{allow: public, provider: iam, operations: [create, read]}]) {
  id: ID!
  video: Video! @connection
  location: Location!
}
